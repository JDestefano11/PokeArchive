let pokemonRepository = function () { let e = []; function t() { return e } function n(t) { "object" == typeof t && "name" in t && "detailsUrl" in t ? e.push(t) : console.error("Invalid pokemon object") } function i(e) { return fetch(e.detailsUrl).then(function (e) { return e.json() }).then(function (t) { e.imgUrl = t.sprites.front_default, e.height = t.height, e.types = t.types, e.weight = t.weight, e.abilities = t.abilities }).catch(function (t) { console.error("Error loading details for " + e.name, t) }) } function l(e) { let t = document.querySelector("#modal-container"); t.innerHTML = ""; let n = document.createElement("div"); n.classList.add("modal"); let i = document.createElement("button"); i.classList.add("close-modal"), i.innerText = "Close", i.addEventListener("click", a); let l = document.createElement("div"); l.classList.add("modal-content"); let o = document.createElement("h2"); o.innerText = e.name; let r = document.createElement("p"); r.innerText = "Height: " + e.height, document.createElement("p"), e.innerText = " Types " + e.types; let d = document.createElement("img"); d.src = e.imgUrl, d.alt = e.name, d.classList.add("pokemon-image"), l.appendChild(o), l.appendChild(r), l.appendChild(d), l.appendChild(i), n.appendChild(l), t.appendChild(n), window.addEventListener("keydown", function (e) { "Escape" === e.key && a() }), window.addEventListener("click", function (e) { e.target === t && a() }), t.classList.add("is-visible") } function a() { document.querySelector("#modal-container").classList.remove("is-visible") } function l(e) { let t = document.querySelector(".modal-body"); document.querySelector(".modal-title").innerText = e.name, t.innerHTML = ""; let n = document.createElement("img"); n.classList.add("modal-img"), n.src = e.imgUrl, n.alt = "Image of " + e.name, t.appendChild(n), e.types.map(function (e) { return e.type.name }).join(""); let i = document.createElement("p"); i.innerText = "Height: " + e.height, t.appendChild(i); let l = document.createElement("p"); l.innerText = "Weight " + e.weight, t.appendChild(l); let a = document.querySelector("p"); a.innerText = "Types: ", t.appendChild(a), e.types.forEach(function (e) { let t = document.createElement("span"); t.innerText = e.type.name, a.appendChild(t) }); let o = document.createElement("p"); o.innerText = "Abilities: ", t.appendChild(o), e.abilities.forEach(function (e) { let t = document.createElement("span"); t.innerText = e.ability.name, o.appendChild(t) }) } function a() { document.querySelector("#exampleModal").classList.remove("show") } return { getAll: t, add: n, addListItem: function e(t) { let n = document.querySelector(".pokemon-list"), a = document.createElement("li"), o = document.createElement("button"); o.innerText = t.name, o.classList.add("btn", "btn-primary", "mb-2"), o.setAttribute("data-target", "#exampleModal"), o.setAttribute("data-toggle", "modal"), a.appendChild(o), n.appendChild(a), o.addEventListener("click", function () { !function e(t) { i(t).then(function () { l(t) }) }(t) }) }, loadList: function e() { return fetch("https://pokeapi.co/api/v2/pokemon/?limit=150").then(function (e) { return e.json() }).then(function (e) { e.results.forEach(function (e) { let t = { name: e.name, detailsUrl: e.url }; n(t) }) }).catch(function (e) { console.error("Error loading Pok\xe9mon list", e) }) }, loadDetails: i } }(); pokemonRepository.loadList().then(function () { pokemonRepository.getAll().forEach(function (e) { pokemonRepository.addListItem(e) }) });